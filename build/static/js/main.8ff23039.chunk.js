(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{113:function(r,n,t){"use strict";t.r(n);var e,a,i=t(0),o=t(11),c=t.n(o),u=(t(86),t(19)),s=(t(87),t(44)),d=t.n(s),f=t(58),l=t(59),h=t.n(l);!function(r){r.Male="male",r.Female="female",r.Other="nonbinary"}(e||(e={})),function(r){r.SolarBuddhica="SolarBuddhica",r.Zerpfy="Zerpfy",r.Antiqua="Antiqua"}(a||(a={}));var b=function(r){return"object"===typeof r||r instanceof Object},j=function(r){return"string"===typeof r||r instanceof String},v=function(r){return Array.isArray(r)||r instanceof Array},p=function(r){if(!r||!j(r))throw new Error("Invalid or missing id");return r},w=function(r){if(!r||!function(r){if(!j(r))throw new Error("district must be a string");return["HYKS","KYS","OYS","TAYS","TYKS"].includes(r)}(r))throw new Error("Invalid or missing healthcare district");return r},O=function(r){if(!r||!j(r)||!function(r){return Boolean(Date.parse(r))}(r))throw new Error("Incorrect or missing date");return new Date(r)},y=function(r){if(!r||!j(r))throw new Error("Invalid or missing string");return r},m=function(r){if(null===r||!function(r){return"number"===typeof r||r instanceof Number}(r))throw new Error("Invalid or missing number");return r},S=function(r){if(!r||!j(r)||!function(r){return["SolarBuddhica","Zerpfy","Antiqua"].includes(r)}(r))throw new Error("Invalid or missing producer");return a[r]},g=function(r){if(!r||(n=r,!Object.values(e).includes(n)))throw new Error("Incorrect or missing gender");var n;return r},B=function(r){if(!r||!j(r))throw new Error("Invalid or missing bottle");return r},E=function(r){if(!v(r))throw new Error("Vaccinations is not an array");return r.map((function(r){return function(r){if(!r||!b(r))throw new Error("vaccination missing or is not an object");return{vaccinationId:p(r.vaccinationId),gender:g(r.gender),sourceBottle:B(r.sourceBottle),injected:O(r.injected)}}(r)}))},A=function(r){var n=[a.SolarBuddhica,a.Zerpfy,a.Antiqua],t={SolarBuddhica:[],Zerpfy:[],Antiqua:[]};return n.forEach((function(n){t[n]=r[n].map((function(r){return function(r){if(!b(r))throw new Error("order is not an object");return{orderId:p(r.orderId),healthCareDistrict:w(r.healthCareDistrict),orderNumber:m(r.orderNumber),responsiblePerson:y(r.responsiblePerson),injections:m(r.injections),arrived:O(r.arrived),vaccine:S(r.vaccine),vaccinations:E(r.vaccinations)}}(r)}))})),t},q=function(r){try{if(!function(r){try{if(!b(r))throw new Error("not an object");return Object.keys(a).forEach((function(n){if(!Object.keys(r).includes(n))throw new Error("Missing key");if(!v(r[n]))throw new Error("data under key: ".concat(n," was not an array."))})),!0}catch(n){return!1}}(r))throw new Error("missing manufacturer");return A(r)}catch(n){return null}},Z={SolarBuddhica:[],Zerpfy:[],Antiqua:[]},x=function(){var r=Object(i.useState)(Z),n=Object(u.a)(r,2),t=n[0],e=n[1],a=Object(i.useState)(""),o=Object(u.a)(a,2),c=o[0],s=o[1];return Object(i.useEffect)((function(){(function(){var r=Object(f.a)(d.a.mark((function r(){var n,t;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h.a.get("".concat("http://localhost:3001/api/","orders/"));case 3:if(n=r.sent,null!==(t=q(n.data))){r.next=7;break}throw new Error("data failed to validate or was null");case 7:e(t),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),s(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(){return r.apply(this,arguments)}})()()}),[]),{orders:t,error:c}},D=t(39),I=t(30),k=t(60),M=function(r,n){return n.filter((function(n){return Object(I.a)(n.arrived,r)}))},T=function(r,n){return n.filter((function(n){return Object(k.a)(n.arrived,r)}))},N=function(r){return r.flatMap((function(r){return r.vaccinations})).length},Y=function(r){return r.map((function(r){return r.injections})).reduce((function(r,n){return r+n}))},C=function(r){return{Antiqua:{orders:r.Antiqua.length,vaccinations:N(r.Antiqua),doses:Y(r.Antiqua)},SolarBuddhica:{orders:r.SolarBuddhica.length,vaccinations:N(r.SolarBuddhica),doses:Y(r.SolarBuddhica)},Zerpfy:{orders:r.Zerpfy.length,vaccinations:N(r.Zerpfy),doses:Y(r.Zerpfy)}}},K={SolarBuddhica:[],Antiqua:[],Zerpfy:[]},P={SolarBuddhica:{vaccinations:0,orders:0,doses:0},Antiqua:{vaccinations:0,orders:0,doses:0},Zerpfy:{vaccinations:0,orders:0,doses:0}},J=[],V=function(r){var n=r.orders,t=r.date,e=Object(i.useState)(K),a=Object(u.a)(e,2),o=a[0],c=a[1],s=Object(i.useState)(P),d=Object(u.a)(s,2),f=d[0],l=d[1],h=Object(i.useState)(K),b=Object(u.a)(h,2),j=b[0],v=b[1],p=Object(i.useState)(P),w=Object(u.a)(p,2),O=w[0],y=w[1],m=Object(i.useState)(J),S=Object(u.a)(m,2),g=S[0],B=S[1],E=g.length;return Object(i.useEffect)((function(){c(function(r){var n=r.date,t=r.orders;return{SolarBuddhica:M(n,t.SolarBuddhica),Antiqua:M(n,t.Antiqua),Zerpfy:M(n,t.Zerpfy)}}({orders:n,date:t})),l(C(o)),v(function(r){var n=r.date,t=r.orders;return{SolarBuddhica:T(n,t.SolarBuddhica),Antiqua:T(n,t.Antiqua),Zerpfy:T(n,t.Zerpfy)}}({orders:n,date:t})),y(C(j)),B(function(r,n){return[].concat(Object(D.a)(r.Antiqua),Object(D.a)(r.SolarBuddhica),Object(D.a)(r.Zerpfy)).flatMap((function(r){return r.vaccinations})).filter((function(r){return Object(k.a)(r.injected,n)}))}(n,t))}),[t,n]),{ordersBeforeDate:o,cumulativeCounts:f,ordersOnDate:j,countsOnDate:O,dosesToday:E,vaccinationsToday:g}},F=t(139),H=t(143),R=t(144),z=t(13),G=t(145),L=t(66),Q=t(17),U=function(r){var n=r.date,t=r.setDate;return Object(Q.jsx)(F.a,{position:"static",children:Object(Q.jsxs)(H.a,{children:[Object(Q.jsx)(R.a,{variant:"h4",style:{marginRight:"20px"},children:"VaxData"}),Object(Q.jsx)(z.a,{utils:L.a,children:Object(Q.jsx)(G.a,{disableToolbar:!0,className:"date-picker",variant:"inline",format:"MM/dd/yyyy",label:"Pick date to examine",value:n,onChange:function(r){return t(r)},KeyboardButtonProps:{"aria-label":"change date"}})})]})})};var W=function(){var r=x().orders,n=Object(i.useState)(new Date),t=Object(u.a)(n,2),e=t[0],o=t[1];return V({date:e||new Date,orders:r}).ordersBeforeDate,Object(i.useEffect)((function(){o(function(r){if(0===r.SolarBuddhica.length)return new Date;var n=Object.values(a).map((function(n){return new Date(r[n][0].arrived)}));return n.sort((function(r,n){return n.getTime()-r.getTime()})),n[0]}(r))}),[r]),Object(Q.jsx)("div",{className:"App",children:Object(Q.jsx)(U,{setDate:o,date:e})})};c.a.render(Object(Q.jsx)(i.StrictMode,{children:Object(Q.jsx)(W,{})}),document.getElementById("root"))},86:function(r,n,t){},87:function(r,n,t){}},[[113,1,2]]]);
//# sourceMappingURL=main.8ff23039.chunk.js.map