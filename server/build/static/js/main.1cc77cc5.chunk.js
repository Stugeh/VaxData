(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{303:function(e,r,t){},304:function(e,r,t){},445:function(e,r,t){"use strict";t.r(r);var n,i,a=t(0),o=t(19),c=t.n(o),d=(t(303),t(17)),s=(t(304),t(30)),u=t.n(s),f=t(70),l=t(256),p=t.n(l);!function(e){e.Male="male",e.Female="female",e.Other="nonbinary"}(n||(n={})),function(e){e.SolarBuddhica="SolarBuddhica",e.Zerpfy="Zerpfy",e.Antiqua="Antiqua"}(i||(i={}));var v=function(e){return"object"===typeof e||e instanceof Object},h=function(e){return"string"===typeof e||e instanceof String},O=function(e){return Array.isArray(e)||e instanceof Array},b=function(e){if(!e||!h(e))throw new Error("Invalid or missing id");return e},j=function(e){if(!e||!function(e){if(!h(e))throw new Error("district must be a string");return["HYKS","KYS","OYS","TAYS","TYKS"].includes(e)}(e))throw new Error("Invalid or missing healthcare district");return e},m=function(e){if(!e||!h(e)||!function(e){return Boolean(Date.parse(e))}(e))throw new Error("Incorrect or missing date");return new Date(e)},x=function(e){if(!e||!h(e))throw new Error("Invalid or missing string");return e},y=function(e){if(null===e||!function(e){return"number"===typeof e||e instanceof Number}(e))throw new Error("Invalid or missing number");return e},g=function(e){if(!e||!h(e)||!function(e){return["SolarBuddhica","Zerpfy","Antiqua"].includes(e)}(e))throw new Error("Invalid or missing producer");return i[e]},w=function(e){if(!e||(r=e,!Object.values(n).includes(r)))throw new Error("Incorrect or missing gender");var r;return e},D=function(e){if(!e||!h(e))throw new Error("Invalid or missing bottle");return e},S=function(e){if(!O(e))throw new Error("Vaccinations is not an array");return e.map((function(e){return function(e){if(!e||!v(e))throw new Error("vaccination missing or is not an object");return{vaccinationId:b(e.vaccinationId),gender:w(e.gender),sourceBottle:D(e.sourceBottle),injected:m(e.injected)}}(e)}))},B=function(e){var r=[i.SolarBuddhica,i.Zerpfy,i.Antiqua],t={SolarBuddhica:[],Zerpfy:[],Antiqua:[]};return r.forEach((function(r){t[r]=e[r].map((function(e){return function(e){if(!v(e))throw new Error("order is not an object");return{orderId:b(e.orderId),healthCareDistrict:j(e.healthCareDistrict),orderNumber:y(e.orderNumber),responsiblePerson:x(e.responsiblePerson),injections:y(e.injections),arrived:m(e.arrived),vaccine:g(e.vaccine),vaccinations:S(e.vaccinations)}}(e)}))})),t},k=function(e){try{if(!function(e){try{if(!v(e))throw new Error("not an object");return Object.keys(i).forEach((function(r){if(!Object.keys(e).includes(r))throw new Error("Missing key");if(!O(e[r]))throw new Error("data under key: ".concat(r," was not an array."))})),!0}catch(r){return!1}}(e))throw new Error("missing manufacturer");return B(e)}catch(r){return null}},A={SolarBuddhica:[],Zerpfy:[],Antiqua:[]},E=function(){var e=Object(a.useState)(A),r=Object(d.a)(e,2),t=r[0],n=r[1],i=Object(a.useState)(""),o=Object(d.a)(i,2),c=o[0],s=o[1];return Object(a.useEffect)((function(){(function(){var e=Object(f.a)(u.a.mark((function e(){var r,t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat("http://localhost:3001/api/","orders/"));case 3:if(r=e.sent,null!==(t=k(r.data))){e.next=7;break}throw new Error("data failed to validate or was null");case 7:n(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),s(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]),{orders:t,error:c}},q=t(87),Z=t(505),I=t(257),C=t(162),T=t(126),M=function(e,r){return r.filter((function(r){return Object(q.a)(r.arrived,Object(Z.a)(e,1))}))},N=function(e,r){return r.filter((function(r){return Object(I.a)(r.arrived,e)}))},P=function(e){var r=e.date,t=e.orders;return{SolarBuddhica:N(r,t.SolarBuddhica),Antiqua:N(r,t.Antiqua),Zerpfy:N(r,t.Zerpfy)}},Y=function(e){return e.flatMap((function(e){return e.vaccinations})).length},K=function(e){var r=e.map((function(e){return e.injections}));return 0===r.length?0:r.reduce((function(e,r){return e+r}))},H=function(e,r){return e.flatMap((function(e){return e.vaccinations})).filter((function(e){return Object(I.a)(e.injected,r)}))},z=function(e){return e.filter((function(e){return e.injections===e.vaccinations.length})).length},F=function(e){var r=e.orders,t=e.date;return r.filter((function(e){return Object(q.a)(Object(C.a)(e.arrived,30),t)}))},J=function(e){var r=e.orders,t=e.date;return F({orders:r,date:t}).length},R=function(e){var r=e.orders,t=e.date,n=F({orders:r,date:t}).map((function(e){return e.injections-e.vaccinations.length}));return 0===n.length?0:n.reduce((function(e,r){return e+r}))},V=function(e){var r=e.orders,t=e.date,n=Object(C.a)(t,-30),i=Object(C.a)(t,-20);return r.filter((function(e){return Object(T.a)(e.arrived,n)&&Object(q.a)(e.arrived,i)})).map((function(e){return e.injections-e.vaccinations.length})).reduce((function(e,r){return e+r}),0)},W=function(e,r){return e.filter((function(e){return Object(I.a)(e.arrived,r)})).map((function(e){return e.injections})).reduce((function(e,r){return e+r}),0)},X={SolarBuddhica:[],Antiqua:[],Zerpfy:[]},G={SolarBuddhica:{vaccinations:0,orders:0,doses:0,expiredDoses:0,expiredOrders:0,consumedOrders:0,expiringDoses:0,arrivedDoses:0,arrivedOrders:0},Antiqua:{vaccinations:0,orders:0,doses:0,expiredDoses:0,expiredOrders:0,consumedOrders:0,expiringDoses:0,arrivedDoses:0,arrivedOrders:0},Zerpfy:{vaccinations:0,orders:0,doses:0,expiredDoses:0,expiredOrders:0,consumedOrders:0,expiringDoses:0,arrivedDoses:0,arrivedOrders:0}},L=function(e){var r=e.orders,t=e.date,n=Object(a.useState)(X),i=Object(d.a)(n,2),o=i[0],c=i[1],s=Object(a.useState)(G),u=Object(d.a)(s,2),f=u[0],l=u[1],p=Object(a.useState)(X),v=Object(d.a)(p,2),h=v[0],O=v[1],b=Object(a.useState)(G),j=Object(d.a)(b,2),m=j[0],x=j[1];return Object(a.useEffect)((function(){var e=function(e){var r=e.date,t=e.orders;return{SolarBuddhica:M(r,t.SolarBuddhica),Antiqua:M(r,t.Antiqua),Zerpfy:M(r,t.Zerpfy)}}({orders:r,date:t}),n=P({orders:r,date:t}),i=function(e){var r=e.orders,t=e.date,n=Object.keys(r),i={};return n.forEach((function(e){i[e]={arrivedOrders:r[e].filter((function(e){return Object(I.a)(e.arrived,t)})),arrivedDoses:W(r[e],t),orders:r[e].length,vaccinations:Y(r[e]),doses:K(r[e]),expiredDoses:R({orders:r[e],date:t}),expiredOrders:J({orders:r[e],date:t}),consumedOrders:z(r[e]),expiringDoses:V({orders:r[e],date:t})}})),i}({orders:e,date:t}),a=function(e){var r=e.orders,t=e.date,n=Object.keys(r),i={},a=P({orders:r,date:t}),o=P({orders:r,date:Object(C.a)(t,-30)});return n.forEach((function(e){i[e]={arrivedOrders:r[e].filter((function(e){return Object(I.a)(e.arrived,t)})).length,arrivedDoses:W(r[e],t),orders:a[e].length,vaccinations:H(r[e],t).length,doses:K(a[e]),expiredDoses:R({orders:o[e],date:t}),expiredOrders:J({orders:o[e],date:t}),consumedOrders:z(r[e]),expiringDoses:V({orders:r[e],date:t})}})),i}({orders:e,date:t});c(e),l(i),O(n),x(a)}),[t,r]),{ordersBeforeDate:o,cumulativeCounts:f,ordersOnDate:h,countsOnDate:m}},Q=t(506),U=t(510),$=t(511),_=t(27),ee=t(514),re=t(270),te=t(4),ne=function(e){var r=e.date,t=e.setDate;return Object(te.jsx)(Q.a,{position:"static",children:Object(te.jsxs)(U.a,{children:[Object(te.jsx)($.a,{variant:"h4",style:{marginRight:"20px"},children:"VaxData"}),Object(te.jsx)(_.a,{utils:re.a,children:Object(te.jsx)(ee.a,{disableToolbar:!0,className:"date-picker",variant:"inline",format:"MM/dd/yyyy",label:"Pick date to examine",value:r,onChange:function(e){return t(e)},KeyboardButtonProps:{"aria-label":"change date"}})})]})})},ie=t(40),ae=[i.SolarBuddhica,i.Antiqua,i.Zerpfy],oe=function(e){return e.doses-e.expiredDoses-e.vaccinations},ce=function(e){return e.orders-e.expiredOrders-e.consumedOrders},de=function(e){var r=ae.map((function(r){return{producer:r,arrived:e[r].arrivedDoses,used:e[r].vaccinations,available:oe(e[r]),expired:e[r].expiredDoses,expiring:e[r].expiringDoses}})),t={producer:"total",used:e.SolarBuddhica.vaccinations+e.Antiqua.vaccinations+e.Zerpfy.vaccinations,available:oe(e.SolarBuddhica)+oe(e.Antiqua)+oe(e.Zerpfy),expired:e.SolarBuddhica.expiredDoses+e.Antiqua.expiredDoses+e.Zerpfy.expiredDoses,expiring:e.SolarBuddhica.expiringDoses+e.Antiqua.expiringDoses+e.Zerpfy.expiringDoses,arrived:e.SolarBuddhica.arrivedDoses+e.Antiqua.arrivedDoses+e.Zerpfy.arrivedDoses};return[].concat(Object(ie.a)(r),[t])},se=function(e){var r=ae.map((function(r){return{producer:r,arrived:e[r].arrivedOrders,available:ce(e[r]),expired:e[r].expiredOrders,consumed:e[r].consumedOrders}})),t={producer:"total",available:ce(e.Antiqua)+ce(e.SolarBuddhica)+ce(e.Zerpfy),expired:e.SolarBuddhica.expiredOrders+e.Antiqua.expiredOrders+e.Zerpfy.expiredOrders,consumed:e.Antiqua.consumedOrders+e.SolarBuddhica.consumedOrders+e.Zerpfy.consumedOrders,arrived:e.SolarBuddhica.arrivedOrders+e.Antiqua.arrivedOrders+e.Zerpfy.arrivedOrders};return[].concat(Object(ie.a)(r),[t])},ue=t(271),fe=t(513),le=function(e){var r=e.data,t=e.keys,n=e.index,i=e.header;return Object(te.jsxs)(fe.a,{className:"chart",children:[Object(te.jsx)($.a,{variant:"h5",children:i}),Object(te.jsx)(ue.a,{data:r,keys:t,indexBy:n,margin:{top:10,right:120,bottom:50,left:60},padding:.3,indexScale:{type:"band",round:!0},colors:{scheme:"category10"},borderColor:{from:"color",modifiers:[["darker",1.6]]},axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legendPosition:"middle",legendOffset:32},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}]})]})},pe=function(e){var r=e.data,t=r.cumulativeCounts,n=r.countsOnDate;return Object(te.jsxs)("div",{className:"chart-container",children:[Object(te.jsx)(le,{header:"Cumulative Orders",data:se(t),keys:["available","consumed","expired"],index:"producer"}),Object(te.jsx)(le,{header:"Cumulative doses",data:de(t),keys:["available","used","expired"],index:"producer"}),Object(te.jsx)(le,{header:"Orders Today",data:se(n),keys:["arrived","expired"],index:"producer"}),Object(te.jsx)(le,{header:"Doses Today",data:de(n),keys:["used","expired","arrived"],index:"producer"}),Object(te.jsx)(le,{header:"Doses expiring within 10 days",data:de(t),keys:["expiring"],index:"producer"})]})};var ve=function(){var e=E().orders,r=Object(a.useState)(new Date),t=Object(d.a)(r,2),n=t[0],o=t[1],c=L({date:n||new Date,orders:e});return Object(a.useEffect)((function(){o(function(e){if(0===e.SolarBuddhica.length)return new Date;var r=Object.values(i).map((function(r){return new Date(e[r][0].arrived)}));return r.sort((function(e,r){return r.getTime()-e.getTime()})),r[0]}(e))}),[e]),Object(te.jsxs)("div",{className:"App",children:[Object(te.jsx)(ne,{setDate:o,date:n}),Object(te.jsx)(pe,{data:c})]})};c.a.render(Object(te.jsx)(a.StrictMode,{children:Object(te.jsx)(ve,{})}),document.getElementById("root"))}},[[445,1,2]]]);
//# sourceMappingURL=main.1cc77cc5.chunk.js.map